# THIS IS AUTOGENERATED. DO NOT EDIT MANUALLY
version = 1
name = "ios-xcode-opencode_just_photo"

[setup]
script = '''
#!/bin/bash
set -euo pipefail

echo "üöÄ Initializing iOS Worktree Environment..."

# 1. Âü∫Á°ÄÁéØÂ¢ÉÊ£ÄÊü•
pwd
xcodebuild -version
swift --version

# 2. Á°Æ‰øùÊ†∏ÂøÉ‰∏ä‰∏ãÊñáÁõÆÂΩïÂ≠òÂú® (Vibe Coding Requirement)
mkdir -p memory-bank

# 3. ÂÆâË£ÖÊó•ÂøóÁæéÂåñÂ∑•ÂÖ∑ (ÈíàÂØπ $phase-verify)
# ‰ΩøÁî® User Install ÈÅøÂÖçÊùÉÈôêÈóÆÈ¢òÔºå‰∏îÂ§±Ë¥•‰∏çÈòªÂ°ûÂêØÂä®
if ! command -v xcpretty >/dev/null 2>&1; then
  echo "Installing xcpretty..."
  gem install xcpretty --no-document --user-install || echo "‚ö†Ô∏è xcpretty install failed, proceeding without it."
  
  # Âä®ÊÄÅÊ∑ªÂä†Ë∑ØÂæÑÂà∞ÂΩìÂâç Shell
  if command -v ruby >/dev/null 2>&1; then
    RUBY_GEM_BIN="$(ruby -e 'print Gem.user_dir')/bin"
    export PATH="$RUBY_GEM_BIN:$PATH"
    
    # Â∞ÜË∑ØÂæÑÂÜôÂÖ•ÈÖçÁΩÆÊñá‰ª∂ÔºåÁ°Æ‰øùÂêéÁª≠ÂºÄÂêØÁöÑÂ≠ê Shell (Â¶Ç Agent Ë∞ÉÁî®ÁöÑÁªàÁ´Ø) ‰πüËÉΩÈÄöËøá
    # Ê≥®ÊÑèÔºöCodex Worktree ÈÄöÂ∏∏ÊòØ ephemeral ÁöÑÔºå‰ΩÜËøôÊ†∑ÂÜôÊõ¥‰øùÈô©
    echo "export PATH=\"$RUBY_GEM_BIN:\$PATH\"" >> ~/.zshrc || true
    echo "export PATH=\"$RUBY_GEM_BIN:\$PATH\"" >> ~/.bash_profile || true
  fi
fi

# 4. ÊúÄÁªàÈ™åËØÅ
if command -v xcpretty >/dev/null 2>&1; then
    echo "‚úÖ xcpretty installed."
else
    echo "‚ö†Ô∏è xcpretty not found. Please update \$phase-verify to remove '| xcpretty' if commands fail."
fi

echo "‚úÖ Environment Ready."
'''

[setup.darwin]
script = '''
#!/bin/bash
set -euo pipefail

echo "üöÄ Initializing iOS Worktree Environment..."

# 1. Âü∫Á°ÄÁéØÂ¢ÉÊ£ÄÊü•
pwd
xcodebuild -version
swift --version

# 2. Á°Æ‰øùÊ†∏ÂøÉ‰∏ä‰∏ãÊñáÁõÆÂΩïÂ≠òÂú® (Vibe Coding Requirement)
mkdir -p memory-bank

# 3. ÂÆâË£ÖÊó•ÂøóÁæéÂåñÂ∑•ÂÖ∑ (ÈíàÂØπ $phase-verify)
# ‰ΩøÁî® User Install ÈÅøÂÖçÊùÉÈôêÈóÆÈ¢òÔºå‰∏îÂ§±Ë¥•‰∏çÈòªÂ°ûÂêØÂä®
if ! command -v xcpretty >/dev/null 2>&1; then
  echo "Installing xcpretty..."
  gem install xcpretty --no-document --user-install || echo "‚ö†Ô∏è xcpretty install failed, proceeding without it."
  
  # Âä®ÊÄÅÊ∑ªÂä†Ë∑ØÂæÑÂà∞ÂΩìÂâç Shell
  if command -v ruby >/dev/null 2>&1; then
    RUBY_GEM_BIN="$(ruby -e 'print Gem.user_dir')/bin"
    export PATH="$RUBY_GEM_BIN:$PATH"
    
    # Â∞ÜË∑ØÂæÑÂÜôÂÖ•ÈÖçÁΩÆÊñá‰ª∂ÔºåÁ°Æ‰øùÂêéÁª≠ÂºÄÂêØÁöÑÂ≠ê Shell (Â¶Ç Agent Ë∞ÉÁî®ÁöÑÁªàÁ´Ø) ‰πüËÉΩÈÄöËøá
    # Ê≥®ÊÑèÔºöCodex Worktree ÈÄöÂ∏∏ÊòØ ephemeral ÁöÑÔºå‰ΩÜËøôÊ†∑ÂÜôÊõ¥‰øùÈô©
    echo "export PATH=\"$RUBY_GEM_BIN:\$PATH\"" >> ~/.zshrc || true
    echo "export PATH=\"$RUBY_GEM_BIN:\$PATH\"" >> ~/.bash_profile || true
  fi
fi

# 4. ÊúÄÁªàÈ™åËØÅ
if command -v xcpretty >/dev/null 2>&1; then
    echo "‚úÖ xcpretty installed."
else
    echo "‚ö†Ô∏è xcpretty not found. Please update \$phase-verify to remove '| xcpretty' if commands fail."
fi

echo "‚úÖ Environment Ready."
'''
